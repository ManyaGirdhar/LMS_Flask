{% extends "base.html" %}

{% block body %}


<div class="container mt-4">
    <h2 class="mb-3">ðŸ“‹ Library Members</h2>

    <div class="d-flex justify-content-end mb-3">
        <a class="btn btn-primary" href="/create-member">+ Add Member</a>
    </div>
    
    
    <!-- Search Bar -->
    <div class="input-group mb-3">
        <input type="text" id="searchInput" class="form-control" placeholder="Search members...">
        <span class="input-group-text"><i class="bi bi-search"></i></span>
    </div>

    <!-- Members Table -->
    <div class="table-responsive">
        <table class="table table-striped table-hover">
            <thead class="table-dark">
                <tr>
                    <th>Member ID</th>
                    <th>First Name</th>
                    <th>Last Name</th>
                    <th>Email</th>
                    <th>Phone</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody id="membersTable">
                {% for member in members %}
                <tr>
                    <td>{{ member.member_id }}</td>
                    <td>{{ member.first_name }}</td>
                    <td>{{ member.last_name }}</td>
                    <td>{{ member.email }}</td>
                    <td>{{ member.phone }}</td>
                    <td>
                        <a href="{{ url_for('transaction_record', member_id=member.member_id) }}" class="btn btn-primary btn-sm">
                            <i class="bi bi-file-earmark-text"></i> Transaction Record
                        </a>
                        <a href="{{ url_for('view_card', member_id=member.member_id) }}" class="btn btn-info btn-sm">
                            <i class="bi bi-person-vcard"></i> View Card
                        </a>
                        <a href="mailto:{{ member.email }}" class="btn btn-success btn-sm">
                            <i class="bi bi-envelope"></i> Mail
                        </a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<script>
    // Search Filter for Members
    document.getElementById("searchInput").addEventListener("keyup", function () {
        let input = this.value.toLowerCase();
        let rows = document.querySelectorAll("#membersTable tr");

        rows.forEach(row => {
            let text = row.innerText.toLowerCase();
            row.style.display = text.includes(input) ? "" : "none";
        });
    });
</script>
{% endblock %}
